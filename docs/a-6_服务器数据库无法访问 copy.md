> 作者：optics915。
>
> **介绍:** 这是一个随手化的类似笔记的个人博客 作者: **[optics915](https://optics915.gitee.io/docsify-blog)** 。一般会在此记录一些从知乎、B站、GitHub上学来的有意思的操作，每一个过程都先自己操作成功之后再将其记录下来，以方便日后碰到相似类型时有理可依。

新式复现这一板块主要是在学习的过程中，根据别人的分享以及新遇到的问题，通过上网查找资料，综合记录一些此前未曾掌握的技巧以及复现别人的操作，我想对于我这样一个小白，从模仿、复现开始也是一种自我加强学习的过程吧。

## 6 服务器数据库无法访问
这已经是我个人博客网站的第三次崩溃了，有了前两次的经验教训，这次修复这个bug花了大概半个小时搞定，虽然时间不多，但是总是遇到这样的问题就很恼火，不过这次跟前两次还是有一点不一样，就是没有被勒索比特币，在重新登录到服务器上的数据库后，原本的哪些数据都恢复了，不像前两次直接就没了，反正我每次都有备份，所以还好。以下是我的整个操作流程：

### 6.1 新建账户
一开始我是打算重新修改一下用户名以及密码的，但是上网查找资料操作后发现并不如他们分享的那样，能够有效的解决这个问题，试了几次之后感觉还不如重新创建一个账户，之前不能用的删除就好，于是我创建了一个账户，参考[mysql新建root用户报错ERROR 1396 (HY000): Operation CREATE USER failed for 'root'@'localhost'](https://blog.csdn.net/menguiying/article/details/52633090?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.channel_param&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.channel_param)
![](https://s1.ax1x.com/2020/09/30/0nky9J.png)

### 6.2 重新登录数据库
重新登录之后发现还是不能创建数据库，于是想到是不是没有权限，那么就给这个用户名赋值权限吧，格式如截图中所示，最好再flush privileges;刷新一下
![](https://s1.ax1x.com/2020/09/30/0nkRnx.png)

### 6.3 再次重新登录数据库
当我再次打开客户端Navicat时，我原本以为还是跟以前一样被勒索比特币，但是这次居然没有，而是恢复了数据库，这让我很兴奋啊，但是这次又是为什么出现网站崩溃的原因呢？我还是没搞得太明白，想到的一个可能原因是用户名和密码设置得太简单了？在我登录到服务器的MySQL设置跳过密码时发现上次设置完密码后没有将这个`skip-grant-tables`去掉注释，然后用户名又是设置的root，可能导致了被攻击，所以这次我降用户名和密码设置得更复杂，也将`skip-grant-tables`这个注释去掉了，希望下次不要再出现类似情况。
![](https://s1.ax1x.com/2020/09/30/0nkccR.png)

### 6.4 登录IDEA重新连接数据库
因为我是在IDEA中直接连接的服务器上的数据库，而我这次又修改了用户名和密码，所以需要修改一下重新连接，如图所示
![](https://s1.ax1x.com/2020/09/30/0nkfHK.png)

除此以外，由于在ymal配置文件中也是连接的服务器数据库，所以还得在那儿修改用户名和密码，如图所示
![](https://s1.ax1x.com/2020/09/30/0nkgj1.png)

操作完以上两步后发现还是无法访问[我的博客](https://optics915.top)，原因也很简单，之前的jar包是用的元账户的数据库，修改之后没有重新将项目上传至服务器，自然无法访问
![](https://s1.ax1x.com/2020/09/30/0nk639.png)

### 6.5 打包并上传至服务器
怎么打包和上传至服务器，可以参考我的博客[博客项目部署到服务器](https://optics915.top/blog/7)，然后就可以访问了
![](https://s1.ax1x.com/2020/09/30/0nkWB6.png)
